(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1219:function(e,t,a){},1221:function(e,t,a){},1223:function(e,t,a){},1225:function(e,t,a){"use strict";a.r(t);var n=a(8),i=a.n(n),s=a(491),r=a.n(s),o=(a(503),a(26)),c=a(27),l=a(32),u=a(31),h=a(33),m=a(20),f=a(98),p=a.n(f),d=a(492),b=a.n(d),y=a(493),v=a.n(y),O=a(494),g=a.n(O),j=a(495),k=a.n(j),w=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,{key:"preloader"}))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"preload",value:function(){var e=this;this.load.image("board",b.a),this.load.spritesheet("dice",v.a,{frameWidth:46,frameHeight:46}),this.load.spritesheet("hero2",k.a,{frameWidth:128,frameHeight:128}),this.load.spritesheet("hero",g.a,{frameWidth:128,frameHeight:128}),setTimeout(function(){e.scene.start("initscene")},1e3)}}]),t}(p.a.Scene),x={boardWidth:560,boardHeight:560,pausingFrames:{20:4,25:4,48:1,52:2,56:6,60:5,64:1,68:2,72:6,76:5,96:3,112:3},laddersPositions:{2:{position:38,offsetX:50,offsetY:-150},4:{position:14,offsetX:150,offsetY:-50},9:{position:31,offsetX:50,offsetY:-150},33:{position:85,offsetX:-150,offsetY:-250},52:{position:88,offsetX:-50,offsetY:-150},80:{position:99,offsetX:50,offsetY:-100}},snakePositions:{98:{position:8,offsetX:250,offsetY:450},92:{position:53,offsetX:-50,offsetY:200},62:{position:57,offsetX:100,offsetY:50},56:{position:15,offsetX:50,offsetY:200},51:{position:11,offsetX:0,offsetY:200}}},_=a(1227),P=a(154),E="ROLL_DICE",A="STOP_DICE",H="SET_DICE",Y="ADD_PLAYER",F="SET_PLAYER_PROPS",S=new _.a({state:{dice:-1,dice_state:"hidden",players:{},playingPlayer:"player1"},prevState:{}}),D=new _.a(""),M=D.next.bind(D);function X(){M({action:E})}function U(e,t){M({action:F,payload:{name:e,props:t}})}function R(e){M({action:Y,payload:e})}D.subscribe({next:function(e){var t=e.action,a=e.payload;S.next({state:function(e,t,a){switch(t){case E:var n=e.playingPlayer,i=Object(m.a)({},e.players);return i[n]=Object(m.a)({},i[n],{rolls:1+e.players[n].rolls}),Object(m.a)({},e,{dice_state:"rolling",players:i});case A:return Object(m.a)({},e,{dice_state:"pause"});case H:var s=e.playingPlayer,r=Object(m.a)({},e.players);r[s]=Object(m.a)({},r[s],{position:a+e.players[s].position});var o="player1"===s?"player2":"player1";return Object(m.a)({},e,{playingPlayer:o,dice:a,players:r});case F:var c=Object(m.a)({},e.players);return c[a.name]=Object(m.a)({},c[a.name],a.props),Object(m.a)({},e,{players:c});case Y:return Object(m.a)({},e,{players:Object(m.a)({},e.players,Object(P.a)({},a,{position:1,rolls:0}))});default:return e}}(S.value.state,t,a),prevState:S.value.state}),window.state=S.value.state}});var B=a(70),N=a.n(B),I=a(117),L=a(155),C=function(){function e(t){Object(o.a)(this,e),this.scene=t,this.state=S,this.config=x,this.stateDidUpdate=this.stateDidUpdate.bind(this),this.state.subscribe({next:this.stateDidUpdate})}return Object(c.a)(e,[{key:"stateDidUpdate",value:function(){throw new Error("Gameobject should implement this function")}},{key:"createAnimation",value:function(e){var t=Object(m.a)({frameRate:10,repeat:-1},e);return this.scene.anims.create(t)}},{key:"moveAsync",value:function(e){var t=this;return new Promise(function(a){t.t=t.scene.add.tween(Object(m.a)({targets:t._gameObject,onComplete:a,duration:500},e))})}},{key:"destroy",value:function(){this._gameObject&&this._gameObject.destroy()}}]),e}(),T=a(496),W=a.n(T),G=function(){var e=Object(I.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){setTimeout(function(){return e()},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),J=function(e){function t(e,a,n){var i,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:50;return Object(o.a)(this,t),(i=Object(l.a)(this,Object(u.a)(t).call(this,e))).name=a,i.sprite=n,i.createHero(4,s),i}var a,n;return Object(h.a)(t,e),Object(c.a)(t,[{key:"stateDidUpdate",value:function(e){var t=e.state,a=e.prevState;a.playingPlayer===this.name&&this._gameObject&&this.setHeroPosition(t,a)}},{key:"getHeroPosition",value:function(e){return e.players[this.name]?e.players[this.name].position:1}},{key:"createHero",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;this._gameObject=this.scene.add.sprite(t,this.config.boardHeight-75,this.sprite,e),this._gameObject.scaleX=.7,this._gameObject.scaleY=.7,this.createHeroAnimations()}},{key:"createHeroAnimations",value:function(){var e=this.scene.anims.generateFrameNumbers(this.sprite);this.createAnimation({key:"".concat(this.name,"walkBackwards"),frames:e.slice(0,4),frameRate:5}),this._gameObject.anims.load("".concat(this.name,"walkBackwards")),this.createAnimation({key:"".concat(this.name,"walkUp"),frames:e.slice(12,16),frameRate:5}),this._gameObject.anims.load("".concat(this.name,"walkUp")),this.createAnimation({key:"".concat(this.name,"walkForward"),frames:e.slice(4,8),frameRate:5}),this._gameObject.anims.load("".concat(this.name,"walkForward"))}},{key:"stopAnimations",value:function(){this._gameObject.anims.stop("".concat(this.name,"walkForward")),this._gameObject.anims.stop("".concat(this.name,"walkBackwards")),this._gameObject.anims.stop("".concat(this.name,"walkUp"))}},{key:"shouldMoveForward",value:function(e){return this.isInAnyRange(e,[[1,10],[21,30],[41,50],[61,70],[81,90]])}},{key:"shouldMoveBackwards",value:function(e){return this.isInAnyRange(e,[[11,20],[31,40],[51,60],[71,80],[91,100]])}},{key:"isInAnyRange",value:function(e,t){return t.some(function(t){return W.a.apply(void 0,[e].concat(Object(L.a)(t)))})}},{key:"shouldMoveUp",value:function(e){return[10,20,30,40,50,60,70,80,90].includes(e)}},{key:"setHeroPosition",value:(n=Object(I.a)(N.a.mark(function e(t,a){var n,i,s,r,o,c;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.getHeroPosition(t),i=this.getHeroPosition(a),n!==i){e.next=4;break}return e.abrupt("return");case 4:if(this.isOnLadders(i)||this.isOnSnakes(i)){e.next=10;break}return e.next=7,this.moveHero(i,n);case 7:return this.stopAnimations(),e.next=10,G(100);case 10:if(!this.isOnLadders(n)){e.next=16;break}return s=n,r=this.config.laddersPositions[s],e.next=15,this.moveAsync({x:this._gameObject.x+r.offsetX,y:this._gameObject.y+r.offsetY});case 15:U(this.name,{position:r.position});case 16:if(!this.isOnSnakes(n)){e.next=22;break}return o=n,c=this.config.snakePositions[o],e.next=21,this.moveAsync({x:this._gameObject.x+c.offsetX,y:this._gameObject.y+c.offsetY});case 21:U(this.name,{position:c.position});case 22:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"isOnLadders",value:function(e){return Object(L.a)(Object.keys(this.config.laddersPositions)).map(function(e){return parseInt(e)}).includes(e)}},{key:"isOnSnakes",value:function(e){return Object(L.a)(Object.keys(this.config.snakePositions)).map(function(e){return parseInt(e)}).includes(e)}},{key:"moveHero",value:(a=Object(I.a)(N.a.mark(function e(t,a){var n;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t;case 1:if(!(n<a)){e.next=21;break}if(!this.shouldMoveForward(n)){e.next=8;break}return this._gameObject.anims.play("".concat(this.name,"walkForward")),e.next=6,this.moveForward();case 6:e.next=18;break;case 8:if(!this.shouldMoveUp(n)){e.next=14;break}return this._gameObject.anims.play("".concat(this.name,"walkUp")),e.next=12,this.moveUp();case 12:e.next=18;break;case 14:if(!this.shouldMoveBackwards(n)){e.next=18;break}return this._gameObject.anims.play("".concat(this.name,"walkBackwards")),e.next=18,this.moveBackwards();case 18:n++,e.next=1;break;case 21:case"end":return e.stop()}},e,this)})),function(e,t){return a.apply(this,arguments)})},{key:"moveBackwards",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=this._gameObject.x-e;return this.moveAsync({x:t})}},{key:"moveForward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=this._gameObject.x+e;return this.moveAsync({x:t})}},{key:"moveUp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=this._gameObject.y-e;return this.moveAsync({y:t})}}]),t}(C),q=a(497),z=a.n(q),K=Math.random(),Q=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).create(),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"stateDidUpdate",value:function(e){var t=e.state,a=e.prevState;"rolling"===t.dice_state&&this.animate(),"pause"===t.dice_state&&"rolling"===a.dice_state&&this.pause()}},{key:"getFrames",value:function(){var e=this.scene.anims.generateFrameNumbers("dice");return e=e.filter(function(t){return t.frame>15&&t.frame<e.length-15}),z()(e)}},{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;this._gameObject=this.scene.add.sprite(e,t,"dice")}},{key:"animate",value:function(){this.createAnimation({key:"roll",frames:this.getFrames()}),this._gameObjectAnim=this._gameObject.anims.load("roll"),this._gameObject.anims.play("roll"),this.moveAsync({x:400*Math.random(),y:400*Math.random()}),setTimeout(function(){M({action:A}),K=Math.random()},100*K)}},{key:"pause",value:function(){var e=this,t=Object.keys(this.config.pausingFrames).map(function(e){return+e}),a=setInterval(function(){var n,i=e._gameObject.anims.currentFrame.frame.name;t.includes(i)&&(e._gameObject.anims.stop("roll"),n=e.config.pausingFrames["".concat(i)],M({action:H,payload:n}),clearInterval(a))},Math.floor(300*Math.random())+50)}}]),t}(C),V=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,{key:"initscene"}))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"create",value:function(){this.staticBg=this.add.image(x.boardWidth/2,x.boardHeight/2,"board"),this.staticBg.scaleY=.5,this.staticBg.scaleX=.5,this.hero=new J(this,"player1","hero",50),R("player1"),this.hero2=new J(this,"player2","hero2",60),R("player2"),this.dice=new Q(this)}}]),t}(p.a.Scene),Z={width:x.boardWidth,height:x.boardHeight,scene:[w,V]};a(1219);var $=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={playingPlayer:"player1",dice:-1},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;S.subscribe({next:function(t){var a=t.state;e.setState({playingPlayer:a.playingPlayer,dice:a.dice})}})}},{key:"getPlayerName",value:function(){return this.state.playingPlayer.includes("1")?"Player 1":"Player 2"}},{key:"render",value:function(){return i.a.createElement("div",{className:"playing-bar"},i.a.createElement("div",{className:"labels-container"},i.a.createElement("label",null,i.a.createElement("strong",null,"Player to play: "),this.getPlayerName()),i.a.createElement("label",null,i.a.createElement("strong",null,"Last Dice: "),this.state.dice)),i.a.createElement("div",{className:"button-container"},i.a.createElement("button",{onClick:X},"Roll the dice")))}}]),t}(n.Component),ee=(a(1221),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={position:1,rolls:0},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;S.subscribe({next:function(t){var a=t.state;e.setState(Object(m.a)({},a.players[e.props.player]))}})}},{key:"render",value:function(){return i.a.createElement("div",{className:"player-info"},i.a.createElement("div",{className:"player-info-container"},i.a.createElement("h3",null,this.props.player),i.a.createElement("h5",null,"Position: ",this.state.position),i.a.createElement("h5",null,"Rolls: ",this.state.rolls)))}}]),t}(n.Component)),te=(a(1223),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e,t;e=this.el,t=Object(m.a)({},Z,{parent:e}),new p.a.Game(t)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:""},i.a.createElement("div",{className:"container"},i.a.createElement(ee,{player:"player1"}),i.a.createElement("div",{className:"game-wrapper"},i.a.createElement("h2",null,"Snakes and Ladders"),i.a.createElement("div",{ref:function(t){return e.el=t}}),i.a.createElement($,null)),i.a.createElement(ee,{player:"player2"})))}}]),t}(n.Component));r.a.render(i.a.createElement(te,null),document.getElementById("root"))},492:function(e,t,a){e.exports=a.p+"static/media/board.9485ed2b.jpg"},493:function(e,t,a){e.exports=a.p+"static/media/dice.6dd8eb80.png"},494:function(e,t,a){e.exports=a.p+"static/media/hero.e5eac10f.png"},495:function(e,t,a){e.exports=a.p+"static/media/hero2.3c1ec8d0.png"},498:function(e,t,a){e.exports=a(1225)},503:function(e,t,a){}},[[498,2,1]]]);
//# sourceMappingURL=main.a251501c.chunk.js.map