(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1221:function(e,t,a){},1223:function(e,t,a){},1225:function(e,t,a){},1227:function(e,t,a){},1229:function(e,t,a){"use strict";a.r(t);var n=a(5),i=a.n(n),s=a(492),r=a.n(s),o=(a(505),a(22)),c=a(23),l=a(29),u=a(28),h=a(30),p=a(20),m=a(98),f=a.n(m),d=a(493),y=a.n(d),b=a(494),v=a.n(b),g=a(495),O=a.n(g),j=a(496),k=a.n(j),w=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,{key:"preloader"}))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"preload",value:function(){var e=this;this.load.image("board",y.a),this.load.spritesheet("dice",v.a,{frameWidth:46,frameHeight:46}),this.load.spritesheet("player2",k.a,{frameWidth:128,frameHeight:128}),this.load.spritesheet("player1",O.a,{frameWidth:128,frameHeight:128}),setTimeout(function(){e.scene.start("initscene")},1e3)}}]),t}(f.a.Scene),x={boardWidth:560,boardHeight:560,pausingFrames:{1:48,2:52,3:96,4:20,5:60,6:56},laddersPositions:{2:{position:38,offsetX:50,offsetY:-150},4:{position:14,offsetX:150,offsetY:-50},9:{position:31,offsetX:50,offsetY:-150},33:{position:85,offsetX:-150,offsetY:-250},52:{position:88,offsetX:-50,offsetY:-150},80:{position:99,offsetX:50,offsetY:-100}},snakePositions:{98:{position:8,offsetX:250,offsetY:450},92:{position:53,offsetX:-50,offsetY:200},62:{position:57,offsetX:100,offsetY:50},56:{position:15,offsetX:50,offsetY:200},51:{position:11,offsetX:0,offsetY:200}}},_=a(1231),P=a(154),E="STOP_DICE",S="SET_DICE",A="ADD_PLAYER",Y="SET_PLAYER_PROPS",H=function(e,t){return 6===e?t:"player1"===t?"player2":"player1"},D=new _.a({state:{dice:-1,diceState:"hidden",players:{},playingPlayer:"player1"},prevState:{}}),F=new _.a(""),N=F.next.bind(F);function X(e){var t=e||Math.floor(6*Math.random())+1;N({action:S,payload:t})}function C(e,t){N({action:Y,payload:{name:e,props:t}})}function M(e){N({action:A,payload:e})}F.subscribe({next:function(e){var t=e.action,a=e.payload,n=function(e,t,a){switch(t){case E:var n=H(e.dice,e.playingPlayer),i=Object(p.a)({},e.players);return i[n]=Object(p.a)({},i[n],{position:e.dice+e.players[n].position,reason:"fromDice"}),Object(p.a)({},e,{players:i,diceState:"pause"});case S:var s=e.playingPlayer,r=Object(p.a)({},e.players);return r[s]=Object(p.a)({},r[s],{rolls:1+e.players[s].rolls}),Object(p.a)({},e,{playingPlayer:H(a,s),dice:a,diceState:"rolling",players:r});case Y:var o=Object(p.a)({},e.players);return o[a.name]=Object(p.a)({},o[a.name],a.props),Object(p.a)({},e,{players:o});case A:return Object(p.a)({},e,{players:Object(p.a)({},e.players,Object(P.a)({},a,{position:1,rolls:0}))});default:return e}}(D.value.state,t,a);D.next({state:n,prevState:D.value.state}),"player2"===n.playingPlayer&&"pause"===n.diceState&&n.players.player1&&"fromDice"===n.players.player1.reason&&setTimeout(X,1e3*Math.random()+4e3),window.__state=D.value.state}});var R=a(70),U=a.n(R),B=a(117),L=a(155),I=function(){function e(t,a,n,i,s){Object(o.a)(this,e),this.scene=t,this.state=D,this.config=x,this.name=i,this.sprite=i,this.init(a,n,i,s),this.stateDidUpdate=this.stateDidUpdate.bind(this),this.state.subscribe({next:this.stateDidUpdate})}return Object(c.a)(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"gameobject",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this._gameObject=this.scene.add.sprite(e,t,a,n)}},{key:"stateDidUpdate",value:function(){throw new Error("Gameobject should implement this function")}},{key:"createAnimation",value:function(e){var t=Object(p.a)({frameRate:10,repeat:-1},e);return t.duration&&(delete t.frameRate,delete t.repeat),this.scene.anims.create(t)}},{key:"moveAsync",value:function(e,t){var a=this;return new Promise(function(n){var i=e.onComplete?function(){e.onComplete.apply(e,arguments),n()}:n;a.t=a.scene.add.tween(Object(p.a)({targets:a._gameObject,onComplete:i,duration:t||500},e))})}},{key:"destroy",value:function(){this._gameObject&&this._gameObject.destroy()}}]),e}(),T=a(497),W=a.n(T),G=function(){var e=Object(B.a)(U.a.mark(function e(t){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){setTimeout(function(){return e()},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),J=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i))))._gameObject.scaleX=.7,a._gameObject.scaleY=.7,a.createHeroAnimations(),a}var a,n;return Object(h.a)(t,e),Object(c.a)(t,[{key:"stateDidUpdate",value:function(e){var t=e.state,a=e.prevState;this.setHeroPosition(t,a)}},{key:"getHeroPosition",value:function(e){return e.players[this.name]?e.players[this.name].position:1}},{key:"createHeroAnimations",value:function(){var e=this.scene.anims.generateFrameNumbers(this.sprite);this.createAnimation({key:"".concat(this.name,"walkBackwards"),frames:e.slice(0,4),frameRate:5}),this._gameObject.anims.load("".concat(this.name,"walkBackwards")),this.createAnimation({key:"".concat(this.name,"walkUp"),frames:e.slice(12,16),frameRate:5}),this._gameObject.anims.load("".concat(this.name,"walkUp")),this.createAnimation({key:"".concat(this.name,"walkForward"),frames:e.slice(4,8),frameRate:5}),this._gameObject.anims.load("".concat(this.name,"walkForward"))}},{key:"stopAnimations",value:function(){this._gameObject.anims.stop("".concat(this.name,"walkForward")),this._gameObject.anims.stop("".concat(this.name,"walkBackwards")),this._gameObject.anims.stop("".concat(this.name,"walkUp"))}},{key:"shouldMoveForward",value:function(e){return this.isInAnyRange(e,[[1,10],[21,30],[41,50],[61,70],[81,90]])}},{key:"shouldMoveBackwards",value:function(e){return this.isInAnyRange(e,[[11,20],[31,40],[51,60],[71,80],[91,100]])}},{key:"isInAnyRange",value:function(e,t){return t.some(function(t){return W.a.apply(void 0,[e].concat(Object(L.a)(t)))})}},{key:"shouldMoveUp",value:function(e){return[10,20,30,40,50,60,70,80,90].includes(e)}},{key:"setHeroPosition",value:(n=Object(B.a)(U.a.mark(function e(t,a){var n,i,s,r,o,c;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.getHeroPosition(t),i=this.getHeroPosition(a),n!==i){e.next=4;break}return e.abrupt("return");case 4:if(this.isOnLadders(i)||this.isOnSnakes(i)){e.next=10;break}return e.next=7,this.moveHero(i,n);case 7:return this.stopAnimations(),e.next=10,G(100);case 10:if(!this.isOnLadders(n)){e.next=16;break}return s=n,r=this.config.laddersPositions[s],e.next=15,this.moveAsync({x:this._gameObject.x+r.offsetX,y:this._gameObject.y+r.offsetY});case 15:C(this.name,{position:r.position,reason:"fromLadder"});case 16:if(!this.isOnSnakes(n)){e.next=22;break}return o=n,c=this.config.snakePositions[o],e.next=21,this.moveAsync({x:this._gameObject.x+c.offsetX,y:this._gameObject.y+c.offsetY});case 21:C(this.name,{position:c.position,reason:"fromSname"});case 22:n>100&&C(this.name,{position:200-n,reason:"greater100"});case 23:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"isOnLadders",value:function(e){return Object(L.a)(Object.keys(this.config.laddersPositions)).map(function(e){return parseInt(e)}).includes(e)}},{key:"isOnSnakes",value:function(e){return Object(L.a)(Object.keys(this.config.snakePositions)).map(function(e){return parseInt(e)}).includes(e)}},{key:"moveHero",value:(a=Object(B.a)(U.a.mark(function e(t,a){var n,i,s;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=a>100?a+1:a,n=t;case 2:if(!(n<a)){e.next=30;break}if(i=n,s=n>100?200-n:n,!(this.shouldMoveForward(s)&&i<=100)){e.next=11;break}return this._gameObject.anims.play("".concat(this.name,"walkForward")),e.next=9,this.moveForward();case 9:e.next=27;break;case 11:if(!(this.shouldMoveUp(s)&&i<=100)){e.next=17;break}return this._gameObject.anims.play("".concat(this.name,"walkUp")),e.next=15,this.moveUp();case 15:e.next=27;break;case 17:if(!(this.shouldMoveBackwards(s)&&i<=100)){e.next=23;break}return this._gameObject.anims.play("".concat(this.name,"walkBackwards")),e.next=21,this.moveBackwards();case 21:e.next=27;break;case 23:if(!(i>100)){e.next=27;break}return this._gameObject.anims.play("".concat(this.name,"walkForward")),e.next=27,this.moveForward();case 27:n++,e.next=2;break;case 30:case"end":return e.stop()}},e,this)})),function(e,t){return a.apply(this,arguments)})},{key:"moveBackwards",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=this._gameObject.x-e;return this.moveAsync({x:t})}},{key:"moveForward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=this._gameObject.x+e;return this.moveAsync({x:t})}},{key:"moveUp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=this._gameObject.y-e;return this.moveAsync({y:t})}}]),t}(I),q=a(498),z=a.n(q),K=function(e){function t(e,a,n,i,s){var r;return Object(o.a)(this,t),(r=Object(l.a)(this,Object(u.a)(t).call(this,e,a,n,i,s)))._gameObjectAnim=r._gameObject.anims.load("roll"),r}return Object(h.a)(t,e),Object(c.a)(t,[{key:"stateDidUpdate",value:function(e){var t=e.state;e.prevState;this.state=t,"rolling"===t.diceState&&this.animate(t.dice)}},{key:"getFrames",value:function(){var e=this.scene.anims.generateFrameNumbers("dice");return e=e.filter(function(t){return t.frame>15&&t.frame<e.length-15}),z()(e)}},{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;this._gameObject=this.scene.add.sprite(e,t,"dice")}},{key:"animate",value:function(e){var t=this,a=this.getFrames(),n=this.config.pausingFrames["".concat(e)];n=a.find(function(e){return n===e.frame}),this.createAnimation({key:"roll",frames:a,duration:2e3}),this._gameObject.anims.play("roll");var i=n.frame;this.moveAsync({x:400*Math.random()+50,y:400*Math.random()+50,onComplete:function(){t._gameObject.anims.stop(),t._gameObject.setFrame(i),N({action:E})}},1700)}}]),t}(I),Q=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,{key:"initscene"}))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"create",value:function(){this.staticBg=this.add.image(x.boardWidth/2,x.boardHeight/2,"board"),this.staticBg.scaleY=.5,this.staticBg.scaleX=.5,this.hero=new J(this,60,x.boardHeight-75,"player1",0),M("player1"),this.hero2=new J(this,50,x.boardHeight-75,"player2",0),M("player2"),this.dice=new K(this,100,100,"dice",0)}}]),t}(f.a.Scene),V={width:x.boardWidth,height:x.boardHeight,scene:[w,Q]};a(1221);window.__setDice=X;var Z=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={playingPlayer:"player1",dice:-1,diceState:"stop"},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;D.subscribe({next:function(t){var a=t.state;e.setState({playingPlayer:a.playingPlayer,dice:a.dice,diceState:a.diceState})}})}},{key:"getPlayerName",value:function(){return this.state.playingPlayer.includes("1")?"You":"Computer"}},{key:"render",value:function(){var e=this.getPlayerName();return i.a.createElement("div",{className:"playing-bar"},i.a.createElement("div",{className:"labels-container"},i.a.createElement("label",null,i.a.createElement("strong",null,"Playing next: "),i.a.createElement("span",{className:e.toLowerCase()},e)),i.a.createElement("label",null,i.a.createElement("strong",null,"Last Dice: "),this.state.dice>0?this.state.dice:"-")),i.a.createElement("div",{className:"button-container"},i.a.createElement("button",{disabled:"rolling"===this.state.diceState||"player2"===this.state.playingPlayer,onClick:function(){return X()}},"Roll the dice")))}}]),t}(n.Component),$=a(499),ee=a.n($),te=(a(1223),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={position:1,rolls:0,playingPlayer:"player1"},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;D.subscribe({next:function(t){var a=t.state;e.setState(Object(p.a)({},a.players[e.props.player],{playingPlayer:a.playingPlayer}))}})}},{key:"getPlayerName",value:function(){return"player1"===this.props.player?"You":"Computer"}},{key:"render",value:function(){var e=ee()("player-info-container",{"playing-player":this.state.playingPlayer===this.props.player});return i.a.createElement("div",{className:"player-info"},i.a.createElement("div",{className:e},i.a.createElement("h3",null,this.getPlayerName()),i.a.createElement("h5",null,"Position: ",this.state.position),i.a.createElement("h5",null,"Rolls: ",this.state.rolls)))}}]),t}(n.Component)),ae=(a(1225),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("span",{className:"rules"},i.a.createElement("a",{href:"https://en.wikipedia.org/wiki/Snakes_and_Ladders",target:"_blank"},"History & Rules"))}}]),t}(n.Component)),ne=(a(1227),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e,t;e=this.el,t=Object(p.a)({},V,{parent:e}),new f.a.Game(t)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:""},i.a.createElement("div",{className:"container"},i.a.createElement("div",null,i.a.createElement(ae,null),i.a.createElement(te,{player:"player1"})),i.a.createElement("div",{className:"game-wrapper"},i.a.createElement("h2",null,"Snakes and Ladders"),i.a.createElement("div",{ref:function(t){return e.el=t}}),i.a.createElement(Z,null)),i.a.createElement(te,{player:"player2"})))}}]),t}(n.Component));r.a.render(i.a.createElement(ne,null),document.getElementById("root"))},493:function(e,t,a){e.exports=a.p+"static/media/board.9485ed2b.jpg"},494:function(e,t,a){e.exports=a.p+"static/media/dice.6dd8eb80.png"},495:function(e,t,a){e.exports=a.p+"static/media/hero.e5eac10f.png"},496:function(e,t,a){e.exports=a.p+"static/media/hero2.3c1ec8d0.png"},500:function(e,t,a){e.exports=a(1229)},505:function(e,t,a){}},[[500,2,1]]]);
//# sourceMappingURL=main.fd892faa.chunk.js.map